## Управление процессами

В Windows управление процессами сводится к диспетчеру задач, который имеет графический интерфейс пользователя. С помощью этой утилиты можно запускать и останавливать разные процессы. В Unix-подобных операционных системах, которые являются изначально многопользовательскими, предусмотрены довольно развитые механизмы управления процессами.

Все процессы в Unix-подобных операционных системах делятся на фоновые (background) и приоритетные (foreground). В статье «[Интерфейс командной строки](/tools/cli)» описано использование терминала для запуска приоритетных процессов. Приоритетный режим означает, что терминал будет ожидать завершения процесса и не будет доступен для ввода новых команд до его завершения.

Иногда удобнее использовать фоновый процесс. Например, если мы хотим все время посылать запросы сетевому устройству с помощью команды `ping`, как это было описано в статье «[Работа с сетью](/tools/network)» (ключ `-i` устанавливает количество секунд между запросами к серверу):

```bash
ping 8.8.8.8 -i 15 &
> [1] <PID>
```

Символ `&` в конце строки команды и означает запуск процесса в фоновом режиме. `<PID>` (от Process Identifier) — идентификационный номер процесса. Зная его, можно отслеживать состояние процесса, подавать ему сигналы или управлять им напрямую средствами операционной системы. `[1]` — обозначает номер задания (фонового процесса пользователя, который запущен из данного терминала).

Если запустить другой процесс, например, посылать запросы к другому сетевому устройству, то вы увидите, что номер сменился:

```bash
ping 8.8.4.4 -i 10 &
> [2] <PID>
```

Изменится также и PID. Вы можете посмотреть список задач, для этого используется команда:

```bash
jobs
> [1]  - running    ping 8.8.8.8
> [2]  + running    ping 8.8.4.4
```

Чтобы перевести процесс из фонового в приоритетный режим, можно использовать команду `fg`. Если выполнить её без аргументов, то она переведёт последний фоновый процесс в приоритетный режим. В нашем случае это будет процесс под номером `[2]`.

Запустим процесс в приоритетном режиме и нажмём сочетание клавиш <kbd>Ctrl Z</kbd>:

```bash
ping 8.8.8.8 -i 15
^Z
> [1]  + 22495 suspended  ping 8.8.8.8 -i 15
```

Вызовем список процессов с помощью `jobs`:

```bash
jobs
> [1]  + suspended  ping 8.8.8.8 -i 15
```

`suspended` означает, что процесс остановлен и стоит на паузе. Его можно продолжить командой `bg` и перевести в фоновый режим:

```bash
bg
> [1]  + 22495 continued  ping 8.8.8.8 -i 15
> 64 bytes from 8.8.8.8: icmp_seq=1 ttl=108 time=28.854 ms

jobs
> [1]  + running    ping 8.8.8.8 -i 15
```

## Мониторинг процессов

Есть инструменты и для мониторинга процессов, запущенных в операционной системе. Эти инструменты позволяют отслеживать потребляемые ресурсы (использование процессора, оперативной памяти, дискового пространства и так далее) и взаимодействие с другими процессами и пользователями.

Можно просмотреть в реальном времени нагрузку на процессор, состояние оперативной памяти, состояние [своп-файла](https://ru.wikipedia.org/wiki/Подкачка_страниц) и все процессы, запущенные не только из текущего терминала:

```bash
top
```

Утилита `top` используется для мониторинга состояния операционной системы. С помощью нажатия клавиши <kbd>Q</kbd> на клавиатуре можно выйти из `top`, а нажатие клавиши <kbd>?</kbd> позволяет вывести справку по использованию этой утилиты. На операционных системах семейства Linux чаще пользуются утилитой `htop`, которая имеет более простой интерфейс.

Для того, чтобы получить полный отчёт именно о процессах используют утилиту `ps`. Название утилиты образовалось от «Process Status». Выполнение этой команды в терминале приведёт к выводу списка терминалов. А если добавить ключ `-A`, вы получите список всех текущих процессов в операционной системе:

```bash
ps -A
```

Ключ `-f` используется, чтобы информация о процессах была более детализирована:

```bash
ps -Af
```

Команда `kill` используется для остановке процесса:

```bash
kill <PID>
```

`PID` — это номер (идентификатор) процесса, который можно получить помощью утилиты `ps` или `top`. Номер процесса будет указан в левой колонке таблицы.

Остановка процесса произойдёт, если в коде программы процесса описан ответ на сигнал `SIGKILL`. Но процесс можно завершить принудительно командой:

```bash
sudo kill -9 <PID>
```

Обычно операционная система попросит выполнить эту команду с директивой `sudo`.